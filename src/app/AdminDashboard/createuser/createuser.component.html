<div class="bg-white rounded-xl shadow-2xl p-10 max-w-xl mx-auto">
  <h2 class="text-3xl font-bold text-gray-800 mb-8">Create New User</h2>

  <!-- Success Message -->
  <!-- <div *ngIf="successMessage" class="text-green-600 font-medium mb-4">
    {{ successMessage }}
  </div> -->

  <!-- Error Message -->
  <!-- <div *ngIf="errorMessage" class="text-red-600 font-medium mb-4">
    {{ errorMessage }}
  </div> -->

  <form [formGroup]="userForm" (ngSubmit)="onSubmit()" class="space-y-6">
    <!-- Username -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1"
        >Username</label
      >
      <div class="relative">
        <i class="fas fa-user absolute left-3 top-3.5 text-gray-400"></i>
        <input
          formControlName="username"
          type="text"
          class="w-full pl-10 border border-gray-300 rounded-md p-2 focus:ring-2 focus:ring-indigo-500 outline-none"
          [ngClass]="{ 'border-red-500': isFieldInvalid('username') }"
        />
      </div>
      <div *ngIf="isFieldInvalid('username')" class="text-red-500 text-sm mt-1">
        Username is required
      </div>
    </div>

    <!-- Password -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1"
        >Password</label
      >
      <div class="relative">
        <i class="fas fa-lock absolute left-3 top-3.5 text-gray-400"></i>
        <input
          formControlName="password"
          type="password"
          class="w-full pl-10 border border-gray-300 rounded-md p-2 focus:ring-2 focus:ring-indigo-500 outline-none"
          [ngClass]="{ 'border-red-500': isFieldInvalid('password') }"
        />
      </div>
      <div *ngIf="isFieldInvalid('password')" class="text-red-500 text-sm mt-1">
        Password must be at least 8 characters, include an uppercase letter, a
        number, and a special character
      </div>
    </div>

    <!-- Email -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
      <div class="relative">
        <i class="fas fa-envelope absolute left-3 top-3.5 text-gray-400"></i>
        <input
          formControlName="email"
          type="email"
          class="w-full pl-10 border border-gray-300 rounded-md p-2 focus:ring-2 focus:ring-indigo-500 outline-none"
          [ngClass]="{ 'border-red-500': isFieldInvalid('email') }"
        />
      </div>
      <div *ngIf="isFieldInvalid('email')" class="text-red-500 text-sm mt-1">
        Valid email is required
      </div>
    </div>

    <!-- Phone -->
    <div class="mb-4">
      <label for="phoneno" class="block text-gray-700 text-sm font-medium mb-2"
        >Phone Number</label
      >
      <input
        id="phoneno"
        formControlName="phoneno"
        type="text"
        maxlength="10"
        class="w-full pl-10 border border-gray-300 rounded-md p-2 focus:ring-2 focus:ring-indigo-500 outline-none"
        [ngClass]="{ 'border-red-500': isFieldInvalid('phoneno') }"
        (keypress)="allowOnlyNumbers($event)"
        (input)="enforceMaxLength($event)"
      />

      <!-- ✅ Show if field is touched and empty -->
      <div
        class="text-red-500 text-sm mt-1"
        *ngIf="
          userForm.get('phoneno')?.touched &&
          userForm.get('phoneno')?.hasError('required')
        "
      >
        Phone number is required
      </div>

      <!-- ✅ Show if field is touched, not empty, but invalid pattern (less than 10 digits) -->
      <div
        class="text-red-500 text-sm mt-1"
        *ngIf="
          userForm.get('phoneno')?.touched &&
          !userForm.get('phoneno')?.hasError('required') &&
          userForm.get('phoneno')?.hasError('pattern')
        "
      >
        Enter 10 digit phone number
      </div>
    </div>

    <!-- Role -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Role</label>
      <div class="relative">
        <i class="fas fa-user-shield absolute left-3 top-3.5 text-gray-400"></i>
        <select
          formControlName="role"
          class="w-full pl-10 border border-gray-300 rounded-md p-2 focus:ring-2 focus:ring-indigo-500 outline-none bg-white"
          [ngClass]="{ 'border-red-500': isFieldInvalid('role') }"
        >
          <option value="">Select Role</option>
          <option *ngFor="let role of roles" [value]="role.role_id">
            {{ role.roleName }}
          </option>
        </select>
      </div>
      <div *ngIf="isFieldInvalid('role')" class="text-red-500 text-sm mt-1">
        Role is required
      </div>
    </div>

    <button
      type="submit"
      [disabled]="userForm.invalid"
      class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-md transition"
    >
      Create User
    </button>
  </form>
  <!-- <button
    type="button"
    (click)="showTestToast()"
    class="mt-4 bg-green-500 text-white px-4 py-2 rounded"
  >
    Show Test Toast
</button> -->
</div>
